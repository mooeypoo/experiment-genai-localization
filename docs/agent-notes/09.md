# Step 09 — Simplified Chinese Support

## Summary

Added Simplified Chinese (`zh`) to the existing internationalization system and verified that the UI behaves correctly with this left‑to‑right language. This included a new locale file, wiring the locale into the i18n core, exposing it in the language switcher, and manually validating key flows (post, comments, users list, user profile, and forms) in the browser.

## Decisions & Rationale

### Locale code and direction

The new locale is identified as `zh` instead of a region-specific code like `zh-CN`. This matches the existing pattern (bare language codes such as `en`, `fr`, `es`) and is sufficient for this demo, which has no region-specific content. Because Chinese is written left-to-right in modern UI contexts, it is intentionally **not** added to the `RTL_LOCALES` set in `src/i18n/index.js`, so `dir` remains `'ltr'` when `locale.value === 'zh'`.

The `dir` handling itself was already in place from Step 08: a computed `dir` and a `watchEffect` that updates `document.documentElement.dir` and `.lang`. Adding `zh` therefore only required keeping it out of the RTL set.

### Dedicated Simplified Chinese locale file

I created `src/i18n/locales/zh.js` by structurally mirroring the English locale. Every key path present in `en.js` (`header`, `nav`, `post`, `comment`, `users`, `user`, `validation`, `lang`) exists in the Chinese file to maintain a one-to-one mapping. This keeps the translation lookup simple and prevents subtle missing-key issues, especially for validation messages which are driven by string keys from the store.

Translations are intentionally straightforward and neutral, favoring clarity over stylistic flourish. For example:

- `header.brand`: \"社交演示\" (directly conveys \"Social Demo\").
- `comment.addTitle`: \"添加评论\" (\"Add comment\").
- `user.displayName`: \"显示名称\" instead of a more formal term, aligning with common Chinese UI wording.

### Language switcher entries

The language switcher renders language names by reading `lang` entries from the active locale via `t('lang.' + code)`. To keep the dropdown consistent in all languages, I added a `zh: '简体中文'` entry to the `lang` section in **every** locale file (`en.js`, `fr.js`, `es.js`, `he.js`, `ar.js`, `fa.js`, and of course `zh.js`). This mirrors the approach taken in Step 08 for Hebrew/Arabic/Farsi and ensures that the user always sees \"简体中文\" as the label for this language, regardless of the current UI language.

### Reusing existing layout and typography decisions

No additional layout changes were required for Chinese. All direction-sensitive styles were already converted to logical properties in Step 08 (for example, `margin-inline-start` and `text-align: end`), and because Chinese is LTR the existing layout behaves identically to English/French/Spanish. The global font stack (`Inter, system-ui, -apple-system, sans-serif`) relies on system fallback fonts to render Chinese glyphs, which is acceptable for a demo and works well on typical Linux, macOS, and Windows systems.

## Ambiguities Encountered

### Should we distinguish Simplified vs Traditional Chinese explicitly?

**Options:**

- Provide a general `zh` locale and label it \"简体中文\".
- Introduce explicit `zh-Hans` / `zh-Hant` variants (with separate locale files).

**Resolution:** For now, only a single Simplified Chinese locale (`zh`) is supported, and the label is \"简体中文\". The app does not yet need Traditional Chinese, and adding separate variants would complicate the locale list and file structure without a clear requirement. If Traditional Chinese is needed later, it can be added as a distinct locale code (for example, `zh-Hant`) without breaking the existing `zh` implementation.

### English content vs localized UI

Post titles, bodies, bios, and comments remain in English even when the UI is in Chinese. This raises the question of whether the content itself should be localized.

**Options:**

- Keep seeded content English-only, regardless of UI language.
- Localize all seeded content per language.

**Resolution:** Keep seeded content in English. The goal of this step is to validate that the **chrome** (navigation, labels, validation messages) supports Chinese, not to model multilingual content storage. Since the i18n layer is already in place, content localization can be layered on later if needed.

## Tradeoffs

- **Single `zh` locale vs multiple regional variants.** Choosing a single `zh` locale avoids configuration complexity and keeps the UX simple (one Chinese entry in the language menu). The tradeoff is that regional preferences (date formats, wording differences) are not modeled. For this demo, the browser’s `toLocaleDateString('zh')` already yields reasonable Chinese-style dates (e.g., `2026/2/25`), which is sufficient.
- **System fonts vs bundled CJK fonts.** Relying on system fonts keeps the bundle size small and avoids adding large font files for CJK scripts. The downside is potential visual inconsistency across platforms. For a production app targeting Chinese-speaking users, a carefully chosen web font would be worth considering.
- **Literal translations vs localized tone.** Translations favor clarity and predictability rather than highly localized tone or idiom. This reduces the chance of misinterpretation and keeps them easy to maintain, at the cost of not fully matching native UX copywriting standards.

## Non-Goals

- **Traditional Chinese support.** This step does not add a `zh-Hant` or similar locale.
- **Content translation.** Seeded data (post body, comments, bios) remains English-only.
- **Locale persistence across sessions.** The language still resets to English on page refresh; no localStorage or server persistence was added.
- **Fine-grained typographic tuning for Chinese.** No changes were made to line height, letter spacing, or word-break rules specifically for Chinese.

## Files Changed

- `src/i18n/index.js`
  - Imported the new `zh` locale from `./locales/zh.js`.
  - Extended the `messages` object to include `zh`.
  - Updated `SUPPORTED_LOCALES` to `['en', 'fr', 'es', 'he', 'ar', 'fa', 'zh']`.
  - Left `RTL_LOCALES` unchanged (`['he', 'ar', 'fa']`), so Chinese remains LTR.
- `src/i18n/locales/zh.js` (new)
  - New Simplified Chinese locale file with translations for all existing keys:
    - Global chrome (`header`, `nav`).
    - Post-related copy (`post`, `comment`).
    - User-related copy (`users`, `user`).
    - Validation messages (`validation`).
    - Language names (`lang`), including `zh: '简体中文'`.
- `src/i18n/locales/en.js`
  - Added `zh: '简体中文'` to the `lang` section so the Chinese option appears in the language dropdown when the UI is in English.
- `src/i18n/locales/fr.js`
  - Added `zh: '简体中文'` to the `lang` section.
- `src/i18n/locales/es.js`
  - Added `zh: '简体中文'` to the `lang` section.
- `src/i18n/locales/he.js`
  - Added `zh: '简体中文'` to the `lang` section.
- `src/i18n/locales/ar.js`
  - Added `zh: '简体中文'` to the `lang` section.
- `src/i18n/locales/fa.js`
  - Added `zh: '简体中文'` to the `lang` section.

## Manual Verification Checklist

- [x] `npm run build` succeeds with the new locale included in the bundle.
- [x] On the post view, the language dropdown shows all seven entries, including \"简体中文\".
- [x] Selecting Simplified Chinese updates:
  - [x] Brand text to \"社交演示\".
  - [x] Navigation links to \"帖子\" / \"用户\".
  - [x] \"Viewing as\" label to \"当前视角\".
  - [x] Language label to \"语言\".
- [x] Post view in Chinese:
  - [x] Comments heading reads \"评论（3）\".
  - [x] Comment form uses Chinese labels and placeholder (\"添加评论\", \"以此身份评论\", \"写点什么……\").
  - [x] Validation errors (e.g., empty comment) appear in Chinese.
  - [x] Comment dates use a Chinese-style order (e.g., `2026/2/25`) via `toLocaleDateString('zh')`.
- [x] Users view in Chinese:
  - [x] Page heading displays \"用户\".
  - [x] Create-user form labels and placeholders are fully translated (\"显示名称\", \"偏好称呼\", \"个人简介\").
  - [x] The bio character counter remains readable and correctly shows `0 / 160`.
  - [x] Validation errors (missing display name, overly long bio) display in Chinese.
- [x] User profile view:
  - [x] Surrounding chrome (header, nav, language switcher) is in Chinese.
  - [x] Main profile content layout remains centered and unaffected by the language change.
- [x] Switching between Chinese and English/French/Spanish does not break routing or layout.

## Known Issues / Follow-ups

- **Source content language mismatch.** All seeded text (post, comments, bios) is still English. A future enhancement could add localized content per locale or per user language preference.
- **No explicit CJK word-breaking rules.** The app relies on browser defaults for wrapping Chinese text; for very long unbroken strings this may not be ideal. Adding `word-break: break-all` or `overflow-wrap: anywhere` to specific elements (like comment bodies) is a possible refinement.
- **Accessibility copy review.** While labels are translated, there has been no dedicated review of how the Chinese copy reads in assistive technologies; an accessibility-focused pass could refine terms for clarity in screen readers.

